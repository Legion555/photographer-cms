(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{49:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(2),r=a(22),l=a.n(r),s=(a(49),a(8)),o=a(7),i=a.n(o),u=a(4),d=function(e){return{type:"UPDATE_USERDATA",payload:e}},b=function(e){return{type:"UPDATE_ALBUMDATA",payload:e}},m=function(e){return{type:"UPDATE_IMAGELIST",payload:e}},j=a(6),g=function(e){var t=Object(j.f)(),a=Object(u.b)(),r=Object(c.useState)("login"),l=Object(s.a)(r,2),o=l[0],b=l[1],m=Object(c.useState)([]),g=Object(s.a)(m,2),f=g[0],h=g[1],p=Object(c.useState)("legion@gmail.com"),x=Object(s.a)(p,2),O=x[0],v=x[1],w=Object(c.useState)("legion123"),N=Object(s.a)(w,2),y=N[0],D=N[1],A=Object(c.useState)(""),_=Object(s.a)(A,2),E=_[0],C=_[1],I=Object(c.useState)(""),U=Object(s.a)(I,2),k=U[0],S=U[1],T=Object(c.useState)(""),L=Object(s.a)(T,2),P=L[0],M=L[1];return Object(n.jsx)("div",{className:"flex w-screen h-screen justify-center items-center",children:Object(n.jsxs)("div",{className:"w-max h-max p-10 bg-gray-50 rounded shadow",children:[Object(n.jsxs)("h1",{className:"mb-10 text-center text-4xl",children:[Object(n.jsx)("span",{className:"login"===o?"text-black-400":"text-gray-400",onClick:function(){return b("login")},children:"Login "}),"|",Object(n.jsx)("span",{className:"register"===o?"text-black-400":"text-gray-400",onClick:function(){return b("register")},children:" Register"})]}),"login"===o&&Object(n.jsxs)("form",{className:"w-full",children:[Object(n.jsx)("input",{className:"w-full mb-5 p-2 rounded",type:"text",required:!0,placeholder:"login-email"===f[0]?f[1]:"Email",value:O,onChange:function(e){return v(e.target.value)}}),Object(n.jsx)("input",{className:"w-full mb-5 p-2 rounded",type:"password",required:!0,placeholder:"login-password"===f[0]?f[1]:"Password",value:y,onChange:function(e){return D(e.target.value)}}),Object(n.jsx)("button",{className:"p-3 bg-blue-300 hover:bg-blue-400 rounded",onClick:function(e){return function(e,n,c){e.preventDefault();var r={email:n,password:c};i.a.post("/api/users/login",r).then((function(e){if("success"===e.data)i.a.get("/api/users",{params:{email:O}}).then((function(e){a(d(e.data[0])),console.log(e.data[0]),a({type:"UPDATE_VIEW",payload:"dashboard"}),t.push("/dashboard")})).catch((function(e){console.log("Error: "+e)}));else{var n=[];switch(e.data.match(/"([^"]*)"/)[1]){case"email":n=["login-email",e.data],h(n),v("");break;case"password":n=["login-password",e.data],h(n),D("");break;default:console.log("something went wrong...")}}console.log(e.data)}))}(e,O,y)},children:"Login"}),"registered"===f&&Object(n.jsxs)("p",{children:["Successfully registered!",Object(n.jsx)("br",{}),"Please login."]})]}),"register"===o&&Object(n.jsx)("div",{className:"register__container",children:"registered"!==f&&Object(n.jsxs)("form",{className:"w-full",children:[Object(n.jsx)("input",{className:"w-full mb-5 p-2 rounded",type:"text",required:!0,placeholder:"register-name"===f[0]?f[1]:"Name",value:E,onChange:function(e){return C(e.target.value)}}),Object(n.jsx)("input",{className:"w-full mb-5 p-2 rounded",type:"text",required:!0,placeholder:"register-email"===f[0]?f[1]:"Email",value:k,onChange:function(e){return S(e.target.value)}}),Object(n.jsx)("input",{className:"w-full mb-5 p-2 rounded",type:"password",required:!0,placeholder:"register-password"===f[0]?f[1]:"Password",value:P,onChange:function(e){return M(e.target.value)}}),Object(n.jsx)("button",{className:"p-3 bg-blue-300 hover:bg-blue-400 rounded",onClick:function(e){return function(e){e.preventDefault();var t={name:E,email:k,password:P};i.a.post("/api/users/register",t).then((function(e){if("success"===e.data)b("login"),h("registered");else{var t=[];switch(e.data.match(/"([^"]*)"/)[1]){case"name":t=["register-name",e.data],h(t),C("");break;case"email":t=["register-email",e.data],h(t),S("");break;case"password":t=["register-password",e.data],h(t),M("");break;default:console.log("something went wrong...")}}})).catch((function(e){console.log(e)}))}(e)},children:"Register"})]})})]})})},f=a(24);a(41);f.a.initializeApp({apiKey:"AIzaSyCyRXClEMR-xLRiqbGEAJUo5GON6lCex4w",authDomain:"image-uploader-9342f.firebaseapp.com",projectId:"image-uploader-9342f",storageBucket:"image-uploader-9342f.appspot.com",messagingSenderId:"520127614951",appId:"1:520127614951:web:33c95bd4e87b6c161d3742",measurementId:"G-62YDNGB1PQ"});var h=f.a.storage();function p(e){var t=Object(u.b)(),a=Object(u.c)((function(e){return e.userData})),r=Object(c.useState)(""),l=Object(s.a)(r,2),o=l[0],b=l[1];return Object(n.jsxs)("div",{className:"w-screen h-screen flex justify-center items-center absolute top-0 left-0",children:[Object(n.jsx)("div",{className:"w-full h-full bg-gray-50 bg-opacity-80",onClick:function(){return e.setAlbumView("")}}),Object(n.jsxs)("form",{className:"w-max absolute px-5 py-3 rounded bg-gray-200 shadow",children:[Object(n.jsx)("h1",{className:"text-center text-2xl mb-5",children:"Create new album"}),Object(n.jsx)("input",{className:"w-full mb-5 px-2 py-1 rounded",autoFocus:!0,type:"text",placeholder:"album name",value:o,onChange:function(e){return b(e.target.value)}}),Object(n.jsx)("button",{className:"w-max p-2 rounded bg-blue-200 hover:bg-blue-300",onClick:function(n){return function(n){n.preventDefault();var c={userId:a._id,albumId:Math.floor(1e6*Math.random()),albumName:o};i.a.put("/api/albums/createAlbum",c).then((function(n){console.log(n),i.a.get("/api/users",{params:{email:a.email}}).then((function(a){t(d(a.data[0])),e.setAlbumView("")})).catch((function(e){console.log("Error: "+e)}))})).catch((function(e){console.log(e)}))}(n)},children:"Create"})]})]})}var x=a(25),O=a(19);function v(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.userData})),a=Object(u.c)((function(e){return e.albumData})),r=Object(c.useState)("upload"),l=Object(s.a)(r,2),o=l[0],m=l[1],j=Object(c.useState)(""),g=Object(s.a)(j,2),f=g[0],p=g[1],v=Object(c.useState)({borderColor:"gray"}),w=Object(s.a)(v,2),N=w[0],y=w[1],D=function(n){var c={userId:t._id,albumId:a._id,_id:Math.floor(1e6*Math.random()),name:n.name,url:n.imgUrl};console.log(c),i.a.put("/api/images/addImage",c).then((function(n){console.log(n),i.a.get("/api/users",{params:{email:t.email}}).then((function(t){e(d(t.data[0])),e(b(t.data[0].albums.filter((function(e){return e._id===a._id}))[0]))})).catch((function(e){console.log("Error: "+e)}))})).catch((function(e){console.log(e)}))};return Object(n.jsxs)("div",{className:"flex mt-10 justify-center",children:["upload"===o&&Object(n.jsxs)("div",{className:"w-80 p-4 rounded shadow",children:[Object(n.jsx)("h1",{className:"text-center text-3xl",children:"Upload your images"}),Object(n.jsx)("p",{className:"text-center",children:"Files should be in image format"}),Object(n.jsxs)("div",{className:"h-48 p-4 border-2 border-dashed rounded bg-gray-50 mt-5 mb-3",style:N,onDragOver:function(e){e.preventDefault(),y({borderColor:"blue"})},onDragEnter:function(e){e.preventDefault(),y({borderColor:"blue"})},onDragLeave:function(e){e.preventDefault(),y({borderColor:"gray"})},onDrop:function(e){e.preventDefault();var t=e.dataTransfer.files;Object.values(t).forEach((function(e){if(""===e)return console.error("Not an image");console.log("start of upload"),m("uploading"),h.ref("/images/".concat(e.name)).put(e).on("state_changed",(function(e){console.log(e)}),(function(e){console.log(e)}),(function(){h.ref("images").child(e.name).getDownloadURL().then((function(t){e.imgUrl=t,D(e),m("uploaded")}))}))}))},children:[Object(n.jsx)(O.a,{className:"text-9xl mx-auto"}),Object(n.jsx)("p",{className:"text-center",children:"Drag and drop your images here"})]}),Object(n.jsx)("p",{className:"text-center text-2xl mb-3",children:"or"}),Object(n.jsxs)("form",{className:"flex flex-col",children:[Object(n.jsx)("input",{className:"mb-5 bg-gray-100 rounded",type:"file",onChange:function(e){var t=e.target.files,a=Object.values(t);p(a)},multiple:!0}),Object(n.jsx)("button",{className:"w-max mx-auto px-5 py-2 rounded bg-blue-100 hover:bg-blue-300",onClick:function(e){e.preventDefault(),f.forEach((function(e){if(console.log("start of upload"),""===e)return console.error("Not an image");console.log(f[0]),m("uploading"),h.ref("/images/".concat(e.name)).put(e).on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){h.ref("images").child(e.name).getDownloadURL().then((function(t){e.imgUrl=t,D(e),m("uploaded")}))}))}))},children:"Upload"})]})]}),"uploading"===o&&Object(n.jsxs)("div",{className:"w-80 p-4 rounded shadow",children:[Object(n.jsx)("p",{className:"text-center mb-6",children:"Uploading..."}),Object(n.jsx)("div",{className:"w-60 h-2 mx-auto rounded bg-gray-200",children:Object(n.jsx)("div",{className:"progbar relative w-8 h-full rounded bg-blue-400"})})]}),"uploaded"===o&&Object(n.jsxs)("div",{className:"w-80 p-4 rounded shadow",children:[Object(n.jsx)(x.b,{className:"mx-auto text-5xl text-green-400"}),Object(n.jsx)("h1",{className:"text-center text-xl",children:"Uploaded successfully"}),Object(n.jsx)("p",{className:"w-max mx-auto mt-10 p-4 rounded-xl bg-green-100 cursor-pointer hover:bg-green-300",onClick:function(){m("upload"),p("")},children:"Upload more images"})]})]})}function w(e){var t=Object(u.b)(),a=Object(u.c)((function(e){return e.userData})),c=Object(u.c)((function(e){return e.albumData})),r=function(e,n){var r={userId:a._id,albumId:c._id,imageId:e};i.a.put("/api/images/deleteImage",r).then((function(e){i.a.get("/api/users",{params:{email:a.email}}).then((function(e){h.ref("/images/".concat(n)).delete().then((function(){t(d(e.data[0])),t(b(e.data[0].albums.filter((function(e){return e._id===c._id}))[0]))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))};return Object(n.jsxs)("div",{className:"w-screen h-screen flex justify-center items-center absolute top-0 left-0",children:[Object(n.jsx)("div",{className:"w-full h-full bg-gray-50 bg-opacity-80",onClick:function(){return e.setAlbumView("")}}),Object(n.jsxs)("div",{className:"w-max h-5/6 absolute px-5 py-3 rounded bg-gray-100 shadow overflow-y-scroll",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{className:"text-center text-4xl",children:c.name}),Object(n.jsx)(v,{})]}),Object(n.jsx)("div",{className:"grid w-full justify-center grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-5",children:c.images&&c.images.map((function(e){return Object(n.jsx)(N,{img:e.url,imageId:e._id,imageName:e.name,deleteImage:r},e.name)}))})]})]})}function N(e){return Object(n.jsxs)("div",{className:"w-72 max-h-72",children:[Object(n.jsx)("img",{src:e.img,alt:"",className:"w-full h-full object-cover"}),Object(n.jsx)("div",{className:"w-full h-full relative bottom-full opacity-0 hover:opacity-100",children:Object(n.jsx)(O.b,{className:"float-right text-5xl text-red-600 bg-gray-200 mt-2 mr-2 p-2 rounded-xl cursor-pointer hover:bg-red-600 hover:text-gray-200",onClick:function(){return e.deleteImage(e.imageId,e.imageName)}})})]})}var y=a(43);function D(){var e=Object(j.f)(),t=Object(u.b)(),a=Object(u.c)((function(e){return e.userData})),r=Object(c.useState)(""),l=Object(s.a)(r,2),o=l[0],m=l[1],g=function(e){t(b(a.albums.filter((function(t){return t._id===e}))[0])),m("view")},f=function(e,n){var c={userId:a._id,albumId:e};i.a.put("/api/albums/deleteAlbum",c).then((function(e){i.a.get("/api/users",{params:{email:a.email}}).then((function(e){n.forEach((function(e){h.ref("/images/".concat(e.name)).delete().then((function(){})).catch((function(e){console.log(e)}))})),t(d(e.data[0]))})).catch((function(e){console.log("Error: "+e)}))})).catch((function(e){console.log(e)}))};return Object(n.jsxs)("div",{children:[Object(n.jsxs)("p",{className:"w-max flex items-center text-xl mt-5 ml-10 p-2 rounded-2xl cursor-pointer hover:bg-gray-100",onClick:function(){return e.push("/")},children:[Object(n.jsx)(x.a,{})," Back to site"]}),Object(n.jsxs)("div",{className:"text-center",children:[Object(n.jsx)("h1",{className:"text-6xl mb-5",children:"Albums"}),Object(n.jsx)("p",{className:"w-max mx-auto p-2 rounded-xl text-xl bg-green-200 cursor-pointer hover:bg-green-400",onClick:function(){return m("add")},children:"Create"})]}),Object(n.jsx)("div",{className:"grid justify-items-center w-full grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 p-10",children:a.albums.map((function(e){return Object(n.jsx)(A,{name:e.name,albumId:e._id,albumImages:e.images,thumbnailUrl:e.images&&e.images[0]&&e.images[0].url,viewAlbum:g,deleteAlbum:f},e._id)}))}),"add"===o&&Object(n.jsx)(p,{setAlbumView:m}),"view"===o&&Object(n.jsx)(w,{setAlbumView:m})]})}function A(e){return Object(n.jsxs)("div",{className:"w-72 h-max flex flex-col justify-between shadow rounded-xl",children:[Object(n.jsx)("img",{src:e.thumbnailUrl,alt:"",className:"w-full h-56 object-cover rounded-xl"}),Object(n.jsx)("p",{className:"text-center py-2",children:e.name}),Object(n.jsxs)("div",{className:"flex justify-evenly p-2",children:[Object(n.jsx)(y.a,{className:"text-5xl text-blue-600 p-2 rounded-2xl cursor-pointer hover:bg-blue-600 hover:text-white",onClick:function(){return e.viewAlbum(e.albumId)}}),Object(n.jsx)(O.b,{className:"text-5xl text-red-600 p-2 rounded-2xl cursor-pointer hover:bg-red-600 hover:text-white",onClick:function(){return e.deleteAlbum(e.albumId,e.albumImages)}})]})]})}var _=a(32);function E(e){var t=Object(j.f)(),a=Object(u.b)(),c=Object(u.c)((function(e){return e.albumList})),r=Object(u.c)((function(e){return e.view}));return Object(n.jsxs)("div",{className:"flex justify-evenly items-center w-full h-12 pt-5",children:[Object(n.jsx)("div",{className:"flex",children:Object(n.jsx)("p",{className:"p-2 hover:bg-gray-200 cursor-pointer",children:"Logo"})}),Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsxs)("div",{className:"nav-dropdown py-2 hover:bg-gray-200 cursor-pointer",children:[Object(n.jsx)("div",{children:Object(n.jsx)("p",{className:"px-4",onClick:function(){return t.push("/")},children:"Gallery"})}),Object(n.jsxs)("div",{className:"nav-dropdown-list hidden mt-2 absolute bg-gray-200",children:[c.map((function(e){return Object(n.jsx)("p",{className:"px-4 py-2 hover:bg-gray-400",onClick:function(){return a(m(e.images))},children:e.name},e.name)})),Object(n.jsx)("p",{className:"px-4 py-2 hover:bg-gray-400",onClick:function(){return a(m(c.map((function(e){return e.images.map((function(e){return e}))})).flat()))},children:"All"})]})]}),"dashboard"===r&&Object(n.jsx)("p",{className:"px-4 py-2 hover:bg-gray-200 cursor-pointer",onClick:function(){return t.push("/dashboard")},children:"Dashboard"})]}),Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsx)(_.a,{className:"text-4xl p-2 rounded-2xl hover:bg-blue-100"}),Object(n.jsx)(_.b,{className:"text-4xl p-2 rounded-2xl hover:bg-blue-100"})]})]})}function C(){var e=Object(u.b)(),t=(Object(u.c)((function(e){return e.albumList})),Object(u.c)((function(e){return e.imageList})));Object(c.useEffect)((function(){a()}),[]);var a=function(){i.a.get("/api/albums/").then((function(t){e({type:"UPDATE_ALBUMLIST",payload:t.data[0].albums}),e(m(t.data[0].albums.map((function(e){return e.images.map((function(e){return e}))})).flat()))}))};return Object(n.jsxs)("div",{children:[Object(n.jsx)(E,{}),Object(n.jsx)("div",{className:"grid w-full justify-center grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-5",onClick:function(){return console.log(t)},children:t.map((function(e){return Object(n.jsx)(I,{img:e.url},e.name)}))})]})}function I(e){return Object(n.jsx)("div",{className:"max-w-full h-auto max-h-72",children:Object(n.jsx)("img",{src:e.img,alt:"",className:"w-full h-full object-cover"})})}var U=a(20);var k=function(){var e=Object(u.c)((function(e){return e.view}));return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(U.a,{children:Object(n.jsxs)(j.c,{children:[Object(n.jsx)(j.a,{exact:!0,path:"/",children:Object(n.jsx)(C,{})}),Object(n.jsx)(j.a,{path:"/dashboard",render:function(t){return"dashboard"!==e?null:Object(n.jsx)(D,{})}}),Object(n.jsx)(j.a,{path:"/admin",children:Object(n.jsx)(g,{})})]})})})},S=a(18),T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"gallery",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_VIEW":return t.payload;default:return e}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_USERDATA":return t.payload;default:return e}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_ALBUMDATA":return t.payload;default:return e}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_ALBUMLIST":return t.payload;default:return e}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_IMAGELIST":return t.payload;default:return e}},V=Object(S.b)({view:T,userData:L,albumData:P,albumList:M,imageList:R}),B=Object(S.c)(V,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());l.a.render(Object(n.jsx)(u.a,{store:B,children:Object(n.jsx)(k,{})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.b773279a.chunk.js.map