(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{46:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(2),r=a(15),l=a.n(r),s=(a(46),a(11)),o=a(4),i=a(6),u=a(5),d=a.n(u),b=a(16);a(37);b.a.initializeApp({apiKey:"AIzaSyCyRXClEMR-xLRiqbGEAJUo5GON6lCex4w",authDomain:"image-uploader-9342f.firebaseapp.com",projectId:"image-uploader-9342f",storageBucket:"image-uploader-9342f.appspot.com",messagingSenderId:"520127614951",appId:"1:520127614951:web:33c95bd4e87b6c161d3742",measurementId:"G-62YDNGB1PQ"});var m=b.a.storage(),j=function(e){return{type:"UPDATE_USERDATA",payload:e}},g=function(e){return{type:"UPDATE_ALBUMDATA",payload:e}},f=function(e){return{type:"UPDATE_IMAGELIST",payload:e}};function x(e){var t=Object(o.b)(),a=Object(o.c)((function(e){return e.userData})),r=Object(c.useState)(""),l=Object(i.a)(r,2),s=l[0],u=l[1];return Object(n.jsxs)("div",{className:"w-screen h-screen flex justify-center items-center absolute top-0 left-0",children:[Object(n.jsx)("div",{className:"w-full h-full bg-gray-50 bg-opacity-80",onClick:function(){return e.setAlbumView("")}}),Object(n.jsxs)("form",{className:"w-max absolute px-5 py-3 rounded bg-gray-200 shadow",children:[Object(n.jsx)("h1",{className:"text-center text-2xl mb-5",children:"Create new album"}),Object(n.jsx)("input",{className:"w-full mb-5 px-2 py-1 rounded",autoFocus:!0,type:"text",placeholder:"album name",value:s,onChange:function(e){return u(e.target.value)}}),Object(n.jsx)("button",{className:"w-max p-2 rounded bg-blue-200 hover:bg-blue-300",onClick:function(n){return function(n){n.preventDefault();var c={userId:a._id,albumId:Math.floor(1e6*Math.random()),albumName:s};d.a.put("/api/albums/createAlbum",c).then((function(n){console.log(n),d.a.get("/api/users",{params:{email:a.email}}).then((function(a){t(j(a.data[0])),e.setAlbumView("")})).catch((function(e){console.log("Error: "+e)}))})).catch((function(e){console.log(e)}))}(n)},children:"Create"})]})]})}var p=a(17),h=a(13);function O(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.userData})),a=Object(o.c)((function(e){return e.albumData})),r=Object(c.useState)("upload"),l=Object(i.a)(r,2),s=l[0],u=l[1],b=Object(c.useState)(""),f=Object(i.a)(b,2),x=f[0],O=f[1],v=Object(c.useState)({borderColor:"gray"}),y=Object(i.a)(v,2),w=y[0],N=y[1],D=function(n){var c={userId:t._id,albumId:a._id,_id:Math.floor(1e6*Math.random()),name:n.name,url:n.imgUrl};console.log(c),d.a.put("/api/images/addImage",c).then((function(n){console.log(n),d.a.get("/api/users",{params:{email:t.email}}).then((function(t){e(j(t.data[0])),e(g(t.data[0].albums.filter((function(e){return e._id===a._id}))[0]))})).catch((function(e){console.log("Error: "+e)}))})).catch((function(e){console.log(e)}))};return Object(n.jsxs)("div",{className:"flex mt-10 justify-center",children:["upload"===s&&Object(n.jsxs)("div",{className:"w-80 p-4 rounded shadow",children:[Object(n.jsx)("h1",{className:"text-center text-3xl",children:"Upload your images"}),Object(n.jsx)("p",{className:"text-center",children:"Files should be in image format"}),Object(n.jsxs)("div",{className:"h-48 p-4 border-2 border-dashed rounded bg-gray-50 mt-5 mb-3",style:w,onDragOver:function(e){e.preventDefault(),N({borderColor:"blue"})},onDragEnter:function(e){e.preventDefault(),N({borderColor:"blue"})},onDragLeave:function(e){e.preventDefault(),N({borderColor:"gray"})},onDrop:function(e){e.preventDefault();var t=e.dataTransfer.files;Object.values(t).forEach((function(e){if(""===e)return console.error("Not an image");console.log("start of upload"),u("uploading"),m.ref("/images/".concat(e.name)).put(e).on("state_changed",(function(e){console.log(e)}),(function(e){console.log(e)}),(function(){m.ref("images").child(e.name).getDownloadURL().then((function(t){e.imgUrl=t,D(e),u("uploaded")}))}))}))},children:[Object(n.jsx)(h.a,{className:"text-9xl mx-auto"}),Object(n.jsx)("p",{className:"text-center",children:"Drag and drop your images here"})]}),Object(n.jsx)("p",{className:"text-center text-2xl mb-3",children:"or"}),Object(n.jsxs)("form",{className:"flex flex-col",children:[Object(n.jsx)("input",{className:"mb-5 bg-gray-100 rounded",type:"file",onChange:function(e){var t=e.target.files,a=Object.values(t);O(a)},multiple:!0}),Object(n.jsx)("button",{className:"w-max mx-auto px-5 py-2 rounded bg-blue-100 hover:bg-blue-300",onClick:function(e){e.preventDefault(),x.forEach((function(e){if(console.log("start of upload"),""===e)return console.error("Not an image");console.log(x[0]),u("uploading"),m.ref("/images/".concat(e.name)).put(e).on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){m.ref("images").child(e.name).getDownloadURL().then((function(t){e.imgUrl=t,D(e),u("uploaded")}))}))}))},children:"Upload"})]})]}),"uploading"===s&&Object(n.jsxs)("div",{className:"w-80 p-4 rounded shadow",children:[Object(n.jsx)("p",{className:"text-center mb-6",children:"Uploading..."}),Object(n.jsx)("div",{className:"w-60 h-2 mx-auto rounded bg-gray-200",children:Object(n.jsx)("div",{className:"progbar relative w-8 h-full rounded bg-blue-400"})})]}),"uploaded"===s&&Object(n.jsxs)("div",{className:"w-80 p-4 rounded shadow",children:[Object(n.jsx)(p.b,{className:"mx-auto text-5xl text-green-400"}),Object(n.jsx)("h1",{className:"text-center text-xl",children:"Uploaded successfully"}),Object(n.jsx)("p",{className:"w-max mx-auto mt-10 p-4 rounded-xl bg-green-100 cursor-pointer hover:bg-green-300",onClick:function(){u("upload"),O("")},children:"Upload more images"})]})]})}function v(e){var t=Object(o.b)(),a=Object(o.c)((function(e){return e.userData})),c=Object(o.c)((function(e){return e.albumData})),r=function(e,n){var r={userId:a._id,albumId:c._id,imageId:e};d.a.put("/api/images/deleteImage",r).then((function(e){d.a.get("/api/users",{params:{email:a.email}}).then((function(e){m.ref("/images/".concat(n)).delete().then((function(){t(j(e.data[0])),t(g(e.data[0].albums.filter((function(e){return e._id===c._id}))[0]))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))};return Object(n.jsxs)("div",{className:"w-screen h-screen flex justify-center items-center absolute top-0 left-0",children:[Object(n.jsx)("div",{className:"w-full h-full bg-gray-50 bg-opacity-80",onClick:function(){return e.setAlbumView("")}}),Object(n.jsxs)("div",{className:"w-max h-5/6 absolute px-5 py-3 rounded bg-gray-100 shadow overflow-y-scroll",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{className:"text-center text-4xl",children:c.name}),Object(n.jsx)(O,{})]}),Object(n.jsx)("div",{className:"grid w-full justify-center grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-5",children:c.images&&c.images.map((function(e){return Object(n.jsx)(y,{img:e.url,imageId:e._id,imageName:e.name,deleteImage:r},e.name)}))})]})]})}function y(e){return Object(n.jsxs)("div",{className:"w-72 max-h-72",children:[Object(n.jsx)("img",{src:e.img,alt:"",className:"w-full h-full object-cover"}),Object(n.jsx)("div",{className:"w-full h-full relative bottom-full opacity-0 hover:opacity-100",children:Object(n.jsx)(h.b,{className:"float-right text-5xl text-red-600 bg-gray-200 mt-2 mr-2 p-2 rounded-xl cursor-pointer hover:bg-red-600 hover:text-gray-200",onClick:function(){return e.deleteImage(e.imageId,e.imageName)}})})]})}var w=a(39);function N(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.userData})),a=Object(c.useState)(""),r=Object(i.a)(a,2),l=r[0],u=r[1],b=function(a){e(g(t.albums.filter((function(e){return e._id===a}))[0])),u("view")},f=function(a,n){var c={userId:t._id,albumId:a};d.a.put("/api/albums/deleteAlbum",c).then((function(a){d.a.get("/api/users",{params:{email:t.email}}).then((function(t){n.forEach((function(e){m.ref("/images/".concat(e.name)).delete().then((function(){})).catch((function(e){console.log(e)}))})),e(j(t.data[0]))})).catch((function(e){console.log("Error: "+e)}))})).catch((function(e){console.log(e)}))};return Object(n.jsxs)("div",{children:[Object(n.jsx)(s.A,{href:"/",children:Object(n.jsxs)("p",{className:"w-max flex items-center text-xl mt-5 ml-10 p-2 rounded-2xl cursor-pointer hover:bg-gray-100",children:[Object(n.jsx)(p.a,{})," Back to site"]})}),Object(n.jsxs)("div",{className:"text-center",children:[Object(n.jsx)("h1",{className:"text-6xl mb-5",children:"Albums"}),Object(n.jsx)("p",{className:"w-max mx-auto p-2 rounded-xl text-xl bg-green-200 cursor-pointer hover:bg-green-400",onClick:function(){return u("add")},children:"Create"})]}),Object(n.jsx)("div",{className:"grid justify-items-center w-full grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 p-10",children:t.albums.map((function(e){return Object(n.jsx)(D,{name:e.name,albumId:e._id,albumImages:e.images,thumbnailUrl:e.images&&e.images[0]&&e.images[0].url,viewAlbum:b,deleteAlbum:f},e._id)}))}),"add"===l&&Object(n.jsx)(x,{setAlbumView:u}),"view"===l&&Object(n.jsx)(v,{setAlbumView:u})]})}function D(e){return Object(n.jsxs)("div",{className:"w-72 h-max flex flex-col justify-between shadow rounded-xl",children:[Object(n.jsx)("img",{src:e.thumbnailUrl,alt:"",className:"w-full h-56 object-cover rounded-xl"}),Object(n.jsx)("p",{className:"text-center py-2",children:e.name}),Object(n.jsxs)("div",{className:"flex justify-evenly p-2",children:[Object(n.jsx)(w.a,{className:"text-5xl text-blue-600 p-2 rounded-2xl cursor-pointer hover:bg-blue-600 hover:text-white",onClick:function(){return e.viewAlbum(e.albumId)}}),Object(n.jsx)(h.b,{className:"text-5xl text-red-600 p-2 rounded-2xl cursor-pointer hover:bg-red-600 hover:text-white",onClick:function(){return e.deleteAlbum(e.albumId,e.albumImages)}})]})]})}var A=function(){var e=Object(o.b)(),t=Object(c.useState)([]),a=Object(i.a)(t,2),r=a[0],l=a[1],s=Object(c.useState)("legion@gmail.com"),u=Object(i.a)(s,2),b=u[0],m=u[1],g=Object(c.useState)("legion123"),f=Object(i.a)(g,2),x=f[0],p=f[1];return Object(n.jsx)("div",{className:"flex w-screen h-screen justify-center items-center",children:Object(n.jsxs)("div",{className:"w-max h-max p-10 bg-gray-50 rounded shadow",children:[Object(n.jsx)("h1",{className:"mb-10 text-center text-4xl",children:Object(n.jsx)("span",{className:"text-black-400",children:"Login"})}),Object(n.jsxs)("form",{className:"w-full",children:[Object(n.jsx)("input",{className:"w-full mb-5 p-2 rounded",type:"text",required:!0,placeholder:"login-email"===r[0]?r[1]:"Email",value:b,onChange:function(e){return m(e.target.value)}}),Object(n.jsx)("input",{className:"w-full mb-5 p-2 rounded",type:"password",required:!0,placeholder:"login-password"===r[0]?r[1]:"Password",value:x,onChange:function(e){return p(e.target.value)}}),Object(n.jsx)("button",{className:"p-3 bg-blue-300 hover:bg-blue-400 rounded",onClick:function(t){return function(t,a,n){t.preventDefault();var c={email:a,password:n};d.a.post("/api/users/login",c).then((function(t){if("success"===t.data)d.a.get("/api/users",{params:{email:b}}).then((function(t){e(j(t.data[0])),console.log(t.data[0]),e({type:"UPDATE_ISLOGGEDIN",payload:!0})})).catch((function(e){console.log("Error: "+e)}));else{var a=[];switch(t.data.match(/"([^"]*)"/)[1]){case"email":a=["login-email",t.data],l(a),m("");break;case"password":a=["login-password",t.data],l(a),p("");break;default:console.log("something went wrong...")}}console.log(t.data)}))}(t,b,x)},children:"Login"}),"registered"===r&&Object(n.jsxs)("p",{children:["Successfully registered!",Object(n.jsx)("br",{}),"Please login."]})]})]})})};function I(){var e=Object(o.c)((function(e){return e.isLoggedIn}));return Object(n.jsx)("div",{children:e?Object(n.jsx)(N,{}):Object(n.jsx)(A,{})})}var _=a(25);function E(e){var t=Object(o.b)(),a=Object(o.c)((function(e){return e.albumList})),c=Object(o.c)((function(e){return e.isLoggedIn})),r=function(){e.setHomeView("gallery"),t(f(a.map((function(e){return e.images.map((function(e){return e}))})).flat()))};return Object(n.jsxs)("div",{className:"flex justify-evenly items-center w-full h-12 pt-5",children:[Object(n.jsx)("div",{className:"flex",children:Object(n.jsx)("p",{className:"p-2 hover:bg-gray-200 cursor-pointer",children:"Logo"})}),Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsxs)("div",{className:"nav-dropdown py-2 hover:bg-gray-200 cursor-pointer",children:[Object(n.jsx)("div",{children:Object(n.jsx)("p",{className:"px-4",onClick:r,children:"Gallery"})}),Object(n.jsxs)("div",{className:"nav-dropdown-list hidden mt-2 absolute bg-gray-200",children:[a.map((function(a){return Object(n.jsx)("p",{className:"px-4 py-2 hover:bg-gray-400",onClick:function(){return n=a.images,e.setHomeView("gallery"),void t(f(n));var n},children:a.name},a.name)})),Object(n.jsx)("p",{className:"px-4 py-2 hover:bg-gray-400",onClick:r,children:"All"})]})]}),Object(n.jsx)("p",{className:"px-4 py-2 hover:bg-gray-200 cursor-pointer",onClick:function(){return e.setHomeView("contact")},children:"Contact"}),c&&Object(n.jsx)(s.A,{href:"/admin",children:Object(n.jsx)("p",{className:"px-4 py-2 hover:bg-gray-200 cursor-pointer",children:"Dashboard"})})]}),Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsx)(_.a,{className:"text-4xl p-2 rounded-2xl hover:bg-blue-100"}),Object(n.jsx)(_.b,{className:"text-4xl p-2 rounded-2xl hover:bg-blue-100"})]})]})}function C(){var e=Object(o.c)((function(e){return e.imageList}));return Object(n.jsx)("div",{children:Object(n.jsx)("div",{className:"grid w-full justify-center grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-5",onClick:function(){return console.log(e)},children:e.map((function(e){return Object(n.jsx)(S,{img:e.url},e.name)}))})})}function S(e){return Object(n.jsx)("div",{className:"max-w-full h-auto max-h-72",children:Object(n.jsx)("img",{src:e.img,alt:"",className:"w-full h-full object-cover"})})}var U=a(26),L=a.n(U),T=a(40);function k(){var e=Object(c.useState)("Submit"),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(c.useState)(""),s=Object(i.a)(l,2),o=s[0],u=s[1],b=Object(c.useState)(""),m=Object(i.a)(b,2),j=m[0],g=m[1],f=Object(c.useState)(""),x=Object(i.a)(f,2),p=x[0],h=x[1],O=function(){var e=Object(T.a)(L.a.mark((function e(t){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r("Sending..."),a={name:o,email:j,message:p},d.a.post("/api/email/contact",a,{headers:{"Content-Type":"application/json;charset=utf-8"}}).then((function(e){r("Success"),console.log(e)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{children:Object(n.jsxs)("form",{onSubmit:O,children:[Object(n.jsx)("input",{type:"text",placeholder:"name",required:!0,value:o,onChange:function(e){return u(e.target.value)}}),Object(n.jsx)("input",{type:"text",placeholder:"email",required:!0,value:j,onChange:function(e){return g(e.target.value)}}),Object(n.jsx)("textarea",{type:"text",placeholder:"message",required:!0,value:p,onChange:function(e){return h(e.target.value)}}),Object(n.jsx)("button",{type:"submit",children:a})]})})}function P(){var e=Object(o.b)(),t=Object(c.useState)("gallery"),a=Object(i.a)(t,2),r=a[0],l=a[1];Object(c.useEffect)((function(){s()}),[]);var s=function(){d.a.get("/api/albums/").then((function(t){e({type:"UPDATE_ALBUMLIST",payload:t.data[0].albums}),e(f(t.data[0].albums.map((function(e){return e.images.map((function(e){return e}))})).flat()))}))};return Object(n.jsxs)("div",{children:[Object(n.jsx)(E,{setHomeView:l}),"gallery"===r&&Object(n.jsx)(C,{}),"contact"===r&&Object(n.jsx)(k,{})]})}var G={"/":function(){return Object(n.jsx)(P,{})},"/admin":function(){return Object(n.jsx)(I,{})}};var M=function(){return Object(s.useRoutes)(G)},V=a(12),R=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_ISLOGGEDIN":return t.payload;default:return e}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_USERDATA":return t.payload;default:return e}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_ALBUMDATA":return t.payload;default:return e}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_ALBUMLIST":return t.payload;default:return e}},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_IMAGELIST":return t.payload;default:return e}},J=Object(V.b)({isLoggedIn:R,userData:B,albumData:q,albumList:X,imageList:H}),z=Object(V.c)(J,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());l.a.render(Object(n.jsx)(o.a,{store:z,children:Object(n.jsx)(M,{})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.5e5d53da.chunk.js.map