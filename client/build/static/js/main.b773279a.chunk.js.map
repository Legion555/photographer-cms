{"version":3,"sources":["actions/index.js","pages/Login.js","firebase/firebase.js","components/admin_AddAlbum.js","components/Upload.js","components/admin_AlbumView.js","pages/Dashboard.js","components/Nav.js","pages/Gallery.js","App.js","reducers/view.js","reducers/userData.js","reducers/albumData.js","reducers/albumList.js","reducers/imageList.js","reducers/index.js","index.js"],"names":["updateUserData","data","type","payload","updateAlbumData","updateImageList","Login","props","history","useHistory","dispatch","useDispatch","useState","authView","setAuthView","errorHandle","setErrorHandle","loginEmail","setLoginEmail","loginPassword","setLoginPassword","regName","setRegName","regEmail","setRegEmail","regPassword","setRegPassword","className","onClick","required","placeholder","value","onChange","e","target","email","password","preventDefault","details","axios","post","then","res","get","params","console","log","push","catch","err","error","match","login","name","register","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","storage","AddAlbum","userData","useSelector","state","albumName","setAlbumName","setAlbumView","autoFocus","userId","_id","albumId","Math","floor","random","put","createAlbum","Upload","albumData","view","setView","imageAsFile","setImageAsFile","borderColor","dropStyle","setDropStyle","addImage","imageData","url","imgUrl","albums","filter","album","style","onDragOver","onDragEnter","onDragLeave","onDrop","image","dataTransfer","files","Object","values","forEach","ref","on","snapShot","child","getDownloadURL","fireBaseUrl","newArray","multiple","deleteImage","imageid","imageName","imageId","delete","images","map","Image","img","src","alt","Dashboard","albumView","viewAlbum","deleteAlbum","albumImages","Album","thumbnailUrl","Nav","albumList","flat","Gallery","imageList","useEffect","getAlbums","App","exact","path","render","routeProps","viewReducer","action","userDataReducer","albumDataReducer","albumListReducer","imageListReducer","rootReducer","combineReducers","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.b773279a.chunk.js","sourcesContent":["//view\r\nexport const updateView = data => {\r\n    return {\r\n        type: 'UPDATE_VIEW',\r\n        payload: data\r\n    }\r\n}\r\n\r\n//userdata\r\nexport const updateUserData = data => {\r\n    return {\r\n        type: 'UPDATE_USERDATA',\r\n        payload: data\r\n    }\r\n}\r\n\r\n//albumData\r\nexport const updateAlbumData = data => {\r\n    return {\r\n        type: 'UPDATE_ALBUMDATA',\r\n        payload: data\r\n    }\r\n}\r\n\r\n//albumList\r\nexport const updateAlbumList = data => {\r\n    return {\r\n        type: 'UPDATE_ALBUMLIST',\r\n        payload: data\r\n    }\r\n}\r\n\r\n//imageList\r\nexport const updateImageList = data => {\r\n    return {\r\n        type: 'UPDATE_IMAGELIST',\r\n        payload: data\r\n    }\r\n}\r\n\r\n","import { useState } from 'react';\r\nimport axios from 'axios';\r\n//redux\r\nimport { useDispatch } from 'react-redux';\r\nimport { updateUserData, updateView } from '../actions'\r\n//react-router\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n\r\n\r\nconst Login = (props) => {\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n\r\n    const [authView, setAuthView] = useState('login');\r\n    \r\n    const [errorHandle, setErrorHandle] = useState([]);\r\n    //Login\r\n    const [loginEmail, setLoginEmail] = useState('legion@gmail.com');\r\n    const [loginPassword, setLoginPassword] = useState('legion123');\r\n    //Register\r\n    const [regName, setRegName] = useState('');\r\n    const [regEmail, setRegEmail] = useState('');\r\n    const [regPassword, setRegPassword] = useState('');\r\n\r\n    //Login existing user - pass\r\n    const login = (e, email, password) => {\r\n        e.preventDefault();\r\n        const details = {\r\n            email: email,\r\n            password: password\r\n        }\r\n        axios.post('/api/users/login', details)\r\n        .then(res => {\r\n            if (res.data === 'success') {\r\n                axios.get('/api/users', {\r\n                    params: {\r\n                        email: loginEmail\r\n                    }\r\n                })\r\n                .then(res => {\r\n                    //set user data\r\n                    dispatch(updateUserData(res.data[0]))\r\n                    console.log(res.data[0])\r\n                    //redirect to dashboard\r\n                    dispatch(updateView('dashboard'))\r\n                    history.push('/dashboard')\r\n                })\r\n                .catch(err => {\r\n                    console.log(\"Error: \" + err);\r\n                })\r\n            } else {\r\n                let match = res.data.match(/\"([^\"]*)\"/);\r\n                let error = [];\r\n                switch (match[1]) {\r\n                    case 'email':\r\n                        error = ['login-email', res.data];\r\n                        setErrorHandle(error);\r\n                        setLoginEmail('');\r\n                        break;\r\n                    case 'password':\r\n                        error = ['login-password', res.data];\r\n                        setErrorHandle(error);\r\n                        setLoginPassword('');\r\n                        break;\r\n                    default:\r\n                        console.log('something went wrong...');\r\n                }\r\n            }\r\n            console.log(res.data)\r\n        })\r\n    }\r\n\r\n    //Register new user\r\n    const register = (e) => {\r\n        e.preventDefault();\r\n        const payload = {\r\n            name: regName,\r\n            email: regEmail,\r\n            password: regPassword\r\n        }\r\n        axios.post('/api/users/register', payload)\r\n        .then(res => {\r\n            if (res.data === 'success') {\r\n                setAuthView('login');\r\n                setErrorHandle('registered');\r\n            } else {\r\n                let match = res.data.match(/\"([^\"]*)\"/);\r\n                let error = [];\r\n                switch (match[1]) {\r\n                    case 'name':\r\n                        error = ['register-name', res.data];\r\n                        setErrorHandle(error);\r\n                        setRegName('');\r\n                        break;\r\n                    case 'email':\r\n                        error = ['register-email', res.data];\r\n                        setErrorHandle(error);\r\n                        setRegEmail('');\r\n                        break;\r\n                    case 'password':\r\n                        error = ['register-password', res.data];\r\n                        setErrorHandle(error);\r\n                        setRegPassword('');\r\n                        break;\r\n                    default:\r\n                        console.log('something went wrong...');\r\n                }\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div  className=\"flex w-screen h-screen justify-center items-center\">\r\n            <div className=\"w-max h-max p-10 bg-gray-50 rounded shadow\">\r\n                <h1 className=\"mb-10 text-center text-4xl\">\r\n                    <span className={authView === 'login' ? 'text-black-400' : 'text-gray-400'}\r\n                        onClick={() => setAuthView('login')} >Login </span>\r\n                    | \r\n                    <span className={authView === 'register' ? 'text-black-400' : 'text-gray-400'}\r\n                        onClick={() => setAuthView('register')} > Register</span>\r\n                </h1>\r\n                {authView === 'login' &&\r\n                    <form className=\"w-full\">\r\n                        <input className=\"w-full mb-5 p-2 rounded\"\r\n                            type=\"text\" required placeholder={errorHandle[0] === 'login-email' ? errorHandle[1] : 'Email'}\r\n                            value={loginEmail} onChange={(e) => setLoginEmail(e.target.value)}></input>\r\n                        <input className=\"w-full mb-5 p-2 rounded\"\r\n                            type=\"password\" required placeholder={errorHandle[0] === 'login-password' ? errorHandle[1] : 'Password'}\r\n                            value={loginPassword} onChange={(e) => setLoginPassword(e.target.value)}></input>\r\n\r\n                        <button className=\"p-3 bg-blue-300 hover:bg-blue-400 rounded\"\r\n                            onClick={(e) => login(e, loginEmail, loginPassword)}>Login</button>\r\n                        {errorHandle === 'registered' &&\r\n                        <p>Successfully registered!<br/>Please login.</p>\r\n                        }\r\n                    </form>\r\n                }\r\n                {authView === 'register' &&\r\n                <div className=\"register__container\">\r\n                    {errorHandle !== 'registered' &&\r\n                    <form className=\"w-full\">\r\n                        <input className=\"w-full mb-5 p-2 rounded\"\r\n                            type=\"text\" required placeholder={errorHandle[0] === 'register-name' ? errorHandle[1] : 'Name'}\r\n                            value={regName} onChange={(e) => setRegName(e.target.value)}></input>\r\n                        <input className=\"w-full mb-5 p-2 rounded\"\r\n                            type=\"text\" required placeholder={errorHandle[0] === 'register-email' ? errorHandle[1] : 'Email'}\r\n                            value={regEmail} onChange={(e) => setRegEmail(e.target.value)}></input>\r\n                        <input  className=\"w-full mb-5 p-2 rounded\"\r\n                            type=\"password\" required placeholder={errorHandle[0] === 'register-password' ? errorHandle[1] : 'Password'}\r\n                            value={regPassword} onChange={(e) => setRegPassword(e.target.value)}></input>\r\n                        \r\n                        <button className=\"p-3 bg-blue-300 hover:bg-blue-400 rounded\"\r\n                            onClick={(e) => register(e, regName, regEmail, regPassword)}>Register</button>\r\n                    </form>\r\n                    }\r\n                </div>\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Login","import firebase from 'firebase/app';\r\nimport 'firebase/storage';\r\n\r\nvar firebaseConfig = {\r\n    apiKey: \"AIzaSyCyRXClEMR-xLRiqbGEAJUo5GON6lCex4w\",\r\n    authDomain: \"image-uploader-9342f.firebaseapp.com\",\r\n    projectId: \"image-uploader-9342f\",\r\n    storageBucket: \"image-uploader-9342f.appspot.com\",\r\n    messagingSenderId: \"520127614951\",\r\n    appId: \"1:520127614951:web:33c95bd4e87b6c161d3742\",\r\n    measurementId: \"G-62YDNGB1PQ\"\r\n};\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nconst storage = firebase.storage();\r\n\r\nexport { \r\n    storage, firebase\r\nas default}","import axios from \"axios\";\r\nimport { useState } from \"react\"\r\n//redux\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { updateUserData } from '../actions';\r\n\r\nexport default function AddAlbum(props) {\r\n    const dispatch = useDispatch();\r\n    const userData = useSelector(state => state.userData)\r\n\r\n    const [albumName, setAlbumName] = useState('');\r\n\r\n    const genId = () => {\r\n        return Math.floor(Math.random() * 1000000)\r\n    }\r\n    \r\n\r\n    const createAlbum = (e) => {\r\n        e.preventDefault();\r\n        const payload = {\r\n            userId: userData._id,\r\n            albumId: genId(),\r\n            albumName: albumName\r\n        }\r\n        axios.put(\"/api/albums/createAlbum\", payload)\r\n        .then(res => {\r\n            console.log(res)\r\n            //update local user data\r\n            axios.get('/api/users', {\r\n                params: {\r\n                    email: userData.email\r\n                }\r\n            })\r\n            .then(res => {\r\n                //set user data\r\n                dispatch(updateUserData(res.data[0]));\r\n                props.setAlbumView('');\r\n            })\r\n            .catch(err => {\r\n                console.log(\"Error: \" + err);\r\n            })\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"w-screen h-screen flex justify-center items-center absolute top-0 left-0\">\r\n            <div className=\"w-full h-full bg-gray-50 bg-opacity-80\" onClick={() => props.setAlbumView('')}></div>\r\n            <form className=\"w-max absolute px-5 py-3 rounded bg-gray-200 shadow\">\r\n                <h1 className=\"text-center text-2xl mb-5\">Create new album</h1>\r\n                <input className=\"w-full mb-5 px-2 py-1 rounded\" autoFocus\r\n                    type='text' placeholder='album name'\r\n                    value={albumName} onChange={(e) => setAlbumName(e.target.value)} /> \r\n                <button className=\"w-max p-2 rounded bg-blue-200 hover:bg-blue-300\"\r\n                    onClick={(e) => createAlbum(e)}>Create</button>\r\n            </form>\r\n        </div>\r\n    )\r\n}","import axios from 'axios';\r\nimport { useState } from 'react';\r\nimport { storage } from '../firebase/firebase'\r\nimport 'firebase/storage';\r\n//redux\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { updateUserData, updateAlbumData } from '../actions'\r\n//icons\r\nimport { AiOutlineCheckCircle } from 'react-icons/ai';\r\nimport { BsCardImage } from 'react-icons/bs';\r\n\r\n\r\nconst genId = () => {\r\n  return Math.floor(Math.random() * 1000000);\r\n}\r\n\r\nexport default function Upload() {\r\n  const dispatch = useDispatch();\r\n\r\n  const userData = useSelector(state => state.userData);\r\n  const albumData = useSelector(state => state.albumData);\r\n  const [view, setView] = useState('upload');\r\n\r\n  const [imageAsFile, setImageAsFile] = useState('');\r\n\r\n  const [dropStyle, setDropStyle] = useState({borderColor: 'gray'})\r\n\r\n  const handleImageAsFile = (e) => {\r\n    const image = e.target.files;\r\n    let newArray = Object.values(image)\r\n    setImageAsFile(newArray);\r\n  }\r\n\r\n  //Client-Firebase\r\n  const handleFirebaseUpload = e => {\r\n    e.preventDefault();\r\n    imageAsFile.forEach(image => {\r\n      console.log('start of upload');\r\n      if(image === '') {\r\n        return console.error('Not an image');\r\n      }\r\n      console.log(imageAsFile[0]);\r\n      setView('uploading');\r\n      //Upload image\r\n      const uploadTask = storage.ref(`/images/${image.name}`).put(image)\r\n      uploadTask.on('state_changed',\r\n      (snapShot) => {\r\n        // console.log(snapShot)\r\n      }, (err) => {\r\n        console.log(err)\r\n      }, () => {\r\n        storage.ref('images').child(image.name).getDownloadURL()\r\n        .then(fireBaseUrl => {\r\n          image.imgUrl = fireBaseUrl;\r\n          addImage(image);\r\n          setView('uploaded');\r\n        })\r\n      })\r\n    })\r\n  }\r\n  \r\n  //Client-MongoDB\r\n  const addImage = (imageData) => {\r\n    const payload = {\r\n        userId: userData._id,\r\n        albumId: albumData._id,\r\n        _id: genId(),\r\n        name: imageData.name,\r\n        url: imageData.imgUrl\r\n    }\r\n    console.log(payload)\r\n    axios.put(\"/api/images/addImage\", payload)\r\n    .then(res => {\r\n        console.log(res)\r\n        //update local user data\r\n        axios.get('/api/users', {\r\n            params: {\r\n                email: userData.email\r\n            }\r\n        })\r\n        .then(res => {\r\n            //set user data\r\n            dispatch(updateUserData(res.data[0]));\r\n            dispatch(updateAlbumData(res.data[0].albums.filter(album => album._id === albumData._id)[0]));\r\n        })\r\n        .catch(err => {\r\n            console.log(\"Error: \" + err);\r\n        })\r\n    })\r\n    .catch(err => {\r\n        console.log(err);\r\n    })\r\n  }\r\n  \r\n  //Drag to uplaod\r\n  const dragOver = (e) => {\r\n    e.preventDefault();\r\n    setDropStyle({borderColor: 'blue'})\r\n  }\r\n  const dragEnter = (e) => {\r\n      e.preventDefault();\r\n      setDropStyle({borderColor: 'blue'})\r\n  }\r\n  const dragLeave = (e) => {\r\n      e.preventDefault();\r\n      setDropStyle({borderColor: 'gray'})\r\n  }\r\n  const fileDrop = (e) => {\r\n    e.preventDefault();\r\n    const image = e.dataTransfer.files;\r\n    let newArray = Object.values(image)\r\n\r\n    newArray.forEach(image => {\r\n      if(image === '') {\r\n        return console.error('Not an image');\r\n      }\r\n      console.log('start of upload');\r\n      setView('uploading');\r\n      //Upload image\r\n      const uploadTask = storage.ref(`/images/${image.name}`).put(image)\r\n      uploadTask.on('state_changed',\r\n      (snapShot) => {\r\n        console.log(snapShot)\r\n      }, (err) => {\r\n        console.log(err)\r\n      }, () => {\r\n        storage.ref('images').child(image.name).getDownloadURL()\r\n        .then(fireBaseUrl => {\r\n          image.imgUrl = fireBaseUrl;\r\n          addImage(image);\r\n          setView('uploaded');\r\n        })\r\n      })\r\n    })\r\n  }\r\n  \r\n  const reset = () => {\r\n    setView('upload');\r\n    setImageAsFile('');\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex mt-10 justify-center\">\r\n      {view === 'upload' &&\r\n      <div className=\"w-80 p-4 rounded shadow\">\r\n        <h1 className=\"text-center text-3xl\">Upload your images</h1>\r\n        <p className=\"text-center\">Files should be in image format</p>\r\n        <div className=\"h-48 p-4 border-2 border-dashed rounded bg-gray-50 mt-5 mb-3\" style={dropStyle}\r\n          onDragOver={dragOver}\r\n          onDragEnter={dragEnter}\r\n          onDragLeave={dragLeave}\r\n          onDrop={fileDrop}>\r\n            <BsCardImage className=\"text-9xl mx-auto\" />\r\n            <p className=\"text-center\">Drag and drop your images here</p>\r\n        </div>\r\n        <p className=\"text-center text-2xl mb-3\">or</p>\r\n        <form className=\"flex flex-col\">\r\n          <input className=\"mb-5 bg-gray-100 rounded\" type='file' onChange={handleImageAsFile} multiple />\r\n          <button className=\"w-max mx-auto px-5 py-2 rounded bg-blue-100 hover:bg-blue-300\" onClick={handleFirebaseUpload}>Upload</button>\r\n        </form>\r\n      </div>\r\n      }\r\n      {view === 'uploading' &&\r\n      <div className=\"w-80 p-4 rounded shadow\">\r\n        <p className=\"text-center mb-6\">Uploading...</p>\r\n        <div className=\"w-60 h-2 mx-auto rounded bg-gray-200\">\r\n            <div className=\"progbar relative w-8 h-full rounded bg-blue-400\"></div>\r\n        </div>\r\n      </div>\r\n      }\r\n      {view === 'uploaded' &&\r\n      <div className=\"w-80 p-4 rounded shadow\">\r\n        <AiOutlineCheckCircle className=\"mx-auto text-5xl text-green-400\" />\r\n        <h1 className=\"text-center text-xl\">Uploaded successfully</h1>\r\n        <p className=\"w-max mx-auto mt-10 p-4 rounded-xl bg-green-100 cursor-pointer hover:bg-green-300\"\r\n            onClick={reset}>Upload more images</p>\r\n      </div>\r\n      }\r\n    </div>\r\n  );\r\n}","import axios from \"axios\";\r\nimport Upload from './Upload';\r\nimport { storage } from '../firebase/firebase';\r\n//redux\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { updateUserData, updateAlbumData} from '../actions';\r\n//icons\r\nimport { BsTrash } from 'react-icons/bs';\r\n\r\nexport default function AddAlbum(props) {\r\n    const dispatch = useDispatch();\r\n    const userData = useSelector(state => state.userData);\r\n    const albumData = useSelector(state => state.albumData);\r\n\r\n    const deleteImage = (imageid, imageName) => {\r\n        const payload = {\r\n            userId: userData._id,\r\n            albumId: albumData._id,\r\n            imageId: imageid\r\n        }\r\n        axios.put(\"/api/images/deleteImage\", payload)\r\n        .then(res => {\r\n            //update local user data\r\n            axios.get('/api/users', {\r\n                params: {\r\n                    email: userData.email\r\n                }\r\n            })\r\n            .then(res => {\r\n                //delete on firebase storage\r\n                let imageRef = storage.ref(`/images/${imageName}`);\r\n                imageRef.delete()\r\n                .then(() => {\r\n                    //set user data\r\n                    dispatch(updateUserData(res.data[0]));\r\n                    //set album data\r\n                    dispatch(updateAlbumData( res.data[0].albums.filter(album => album._id === albumData._id)[0]))\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                })\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            })\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"w-screen h-screen flex justify-center items-center absolute top-0 left-0\">\r\n            <div className=\"w-full h-full bg-gray-50 bg-opacity-80\" onClick={() => props.setAlbumView('')}></div>\r\n            <div className=\"w-max h-5/6 absolute px-5 py-3 rounded bg-gray-100 shadow overflow-y-scroll\">\r\n                <div>\r\n                    <h1 className=\"text-center text-4xl\">{albumData.name}</h1>\r\n                    <Upload />\r\n                </div>\r\n                <div className=\"grid w-full justify-center grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-5\">\r\n                {albumData.images && albumData.images.map(image => \r\n                    <Image img={image.url} key={image.name} imageId={image._id} imageName={image.name} deleteImage={deleteImage} />\r\n                )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction Image(props) {\r\n    return (\r\n        <div className=\"w-72 max-h-72\">\r\n            <img src={props.img} alt=\"\" className=\"w-full h-full object-cover\" />\r\n            <div className=\"w-full h-full relative bottom-full opacity-0 hover:opacity-100\">\r\n                <BsTrash className=\"float-right text-5xl text-red-600 bg-gray-200 mt-2 mr-2 p-2 rounded-xl cursor-pointer hover:bg-red-600 hover:text-gray-200\"\r\n                    onClick={() => props.deleteImage(props.imageId, props.imageName)} />\r\n            </div>\r\n        </div>\r\n        \r\n    )\r\n}","import { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { storage } from '../firebase/firebase';\r\nimport AddAlbum from '../components/admin_AddAlbum';\r\nimport AlbumView from '../components/admin_AlbumView';\r\n//redux\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { updateAlbumData, updateUserData } from '../actions';\r\n//icons\r\nimport { AiOutlineArrowLeft } from 'react-icons/ai';\r\nimport { BsTrash } from 'react-icons/bs';\r\nimport { ImEye } from 'react-icons/im';\r\n//react-router\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n\r\n\r\nexport default function Dashboard() {\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const userData = useSelector(state => state.userData);\r\n    \r\n    const [albumView, setAlbumView] = useState('');\r\n\r\n    const viewAlbum = (albumId) => {\r\n        dispatch(updateAlbumData(userData.albums.filter(album => album._id === albumId)[0]));\r\n        setAlbumView('view');\r\n    }\r\n    \r\n    const deleteAlbum = (albumId, albumImages) => {\r\n        const payload = {\r\n            userId: userData._id,\r\n            albumId: albumId\r\n        }\r\n        axios.put('/api/albums/deleteAlbum', payload)\r\n        .then(res => {\r\n            axios.get('/api/users', {\r\n                params: {\r\n                    email: userData.email\r\n                }\r\n            })\r\n            .then(res => {\r\n                albumImages.forEach(image => {\r\n                    //delete on firebase storage\r\n                    let imageRef = storage.ref(`/images/${image.name}`);\r\n                    imageRef.delete()\r\n                    .then(() => {\r\n                    \r\n                    })\r\n                    .catch(err => {\r\n                        console.log(err);\r\n                    })\r\n                })\r\n                //set user data\r\n                dispatch(updateUserData(res.data[0]));\r\n            })\r\n            .catch(err => {\r\n                console.log(\"Error: \" + err)\r\n            })\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        })\r\n    }\r\n\r\n    \r\n\r\n    return (\r\n        <div>\r\n            <p className=\"w-max flex items-center text-xl mt-5 ml-10 p-2 rounded-2xl cursor-pointer hover:bg-gray-100\"\r\n                onClick={() => history.push('/')} ><AiOutlineArrowLeft /> Back to site</p>\r\n            <div className=\"text-center\">\r\n                <h1 className=\"text-6xl mb-5\">Albums</h1>\r\n                <p className=\"w-max mx-auto p-2 rounded-xl text-xl bg-green-200 cursor-pointer hover:bg-green-400\"\r\n                    onClick={() => setAlbumView('add')}>Create</p>\r\n            </div>\r\n            <div className=\"grid justify-items-center w-full grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 p-10\">\r\n                {userData.albums.map(album => \r\n                    <Album name={album.name} key={album._id}\r\n                        albumId={album._id} albumImages={album.images}\r\n                        thumbnailUrl={album.images && album.images[0] && album.images[0].url}\r\n                        viewAlbum={viewAlbum} deleteAlbum={deleteAlbum} />\r\n                )}\r\n            </div>\r\n            {albumView === 'add' &&\r\n                <AddAlbum setAlbumView={setAlbumView} />\r\n            }\r\n            {albumView === 'view' &&\r\n                <AlbumView setAlbumView={setAlbumView} />\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction Album(props) {\r\n    return (\r\n        <div className=\"w-72 h-max flex flex-col justify-between shadow rounded-xl\">\r\n            <img src={props.thumbnailUrl} alt=\"\" className=\"w-full h-56 object-cover rounded-xl\" />\r\n            <p className=\"text-center py-2\">{props.name}</p>\r\n            <div className=\"flex justify-evenly p-2\">\r\n                <ImEye className=\"text-5xl text-blue-600 p-2 rounded-2xl cursor-pointer hover:bg-blue-600 hover:text-white\"\r\n                    onClick={() => props.viewAlbum(props.albumId)} />\r\n                <BsTrash className=\"text-5xl text-red-600 p-2 rounded-2xl cursor-pointer hover:bg-red-600 hover:text-white\"\r\n                    onClick={() => props.deleteAlbum(props.albumId, props.albumImages)} />\r\n            </div>\r\n        </div>\r\n        \r\n    )\r\n}","//icons\r\nimport { FaFacebook, FaTwitter } from 'react-icons/fa';\r\n//redux\r\nimport { useSelector, useDispatch } from \"react-redux\"\r\nimport { updateView, updateImageList } from \"../actions\"\r\n//react-router\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n\r\n\r\nexport default function Nav(props) {\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const albumList = useSelector(state => state.albumList);\r\n\r\n    const view = useSelector(state => state.view);\r\n\r\n    return (\r\n        <div className=\"flex justify-evenly items-center w-full h-12 pt-5\">\r\n            <div className=\"flex\">\r\n                <p className=\"p-2 hover:bg-gray-200 cursor-pointer\">Logo</p>\r\n            </div>\r\n            <div className=\"flex\">\r\n                <div className=\"nav-dropdown py-2 hover:bg-gray-200 cursor-pointer\">\r\n                    <div>\r\n                        <p className=\"px-4\"\r\n                            onClick={() => history.push('/')}>Gallery</p>\r\n                    </div>\r\n                    <div className=\"nav-dropdown-list hidden mt-2 absolute bg-gray-200\">\r\n                        {albumList.map(album => \r\n                            <p className=\"px-4 py-2 hover:bg-gray-400\" key={album.name}\r\n                                onClick={() => dispatch(updateImageList(album.images))}>{album.name}</p>\r\n                        )}\r\n                        <p className=\"px-4 py-2 hover:bg-gray-400\"\r\n                                onClick={() => dispatch(updateImageList(albumList.map(album => album.images.map(image => image)).flat()))}>All</p>\r\n                    </div>\r\n                </div>\r\n                {view === 'dashboard' &&\r\n                    <p className=\"px-4 py-2 hover:bg-gray-200 cursor-pointer\"\r\n                        onClick={() => history.push('/dashboard')}>Dashboard</p>\r\n                }\r\n            </div>\r\n            <div className=\"flex\">\r\n                <FaFacebook className=\"text-4xl p-2 rounded-2xl hover:bg-blue-100\" />\r\n                <FaTwitter className=\"text-4xl p-2 rounded-2xl hover:bg-blue-100\" />\r\n            </div>\r\n        </div>\r\n    )\r\n}","import { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport Nav from '../components/Nav';\r\n//redux\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { updateAlbumList, updateImageList } from '../actions';\r\n\r\n\r\n\r\nexport default function Gallery() {\r\n    const dispatch = useDispatch();\r\n    const albumList = useSelector(state => state.albumList);\r\n    const imageList = useSelector(state => state.imageList);\r\n\r\n    \r\n    useEffect(() => {\r\n        getAlbums();\r\n    // eslint-disable-next-line\r\n    }, [])\r\n    \r\n\r\n    const getAlbums = () => {\r\n        axios.get('/api/albums/')\r\n        .then(res => {\r\n            dispatch(updateAlbumList(res.data[0].albums));\r\n            dispatch(updateImageList(res.data[0].albums.map(album => album.images.map(image => image)).flat()));\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Nav />\r\n            <div className=\"grid w-full justify-center grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-5\" onClick={() => console.log(imageList)}>\r\n            {imageList.map(image => \r\n                <Image img={image.url} key={image.name} />\r\n            )}\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction Image(props) {\r\n    return (\r\n        <div className=\"max-w-full h-auto max-h-72\">\r\n            <img src={props.img} alt=\"\" className=\"w-full h-full object-cover\" />\r\n        </div>\r\n        \r\n    )\r\n}","import Login from './pages/Login';\nimport Dashboard from './pages/Dashboard';\nimport Gallery from './pages/Gallery';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\n//redux\nimport { useSelector } from 'react-redux';\n\n\n\nfunction App() {\n  const view = useSelector(state => state.view);\n\n  return (\n      <div className=\"App\">\n      <Router>\n        <Switch>\n          <Route exact path=\"/\">\n            <Gallery />\n          </Route>\n          <Route path=\"/dashboard\" render={routeProps => {\n            if (view !== 'dashboard') {\n              return null\n            }\n            return <Dashboard />\n          }}\n          />\n          <Route path=\"/admin\">\n            <Login />\n          </Route>\n        </Switch>\n      </Router>\n      </div>\n  );\n}\n\nexport default App\n\n// <Router>\n//   <Switch>\n//     <Route path=\"/\">\n//       <Gallery />\n//     </Route>\n//     <Route path=\"/admin\">\n//       <Dashboard />\n//     </Route>\n//     <Route path=\"/login\">\n//       <Login />\n//     </Route>\n//   </Switch>\n// </Router>","const viewReducer = (state = 'gallery', action) => {\r\n    switch(action.type) {\r\n        case 'UPDATE_VIEW':\r\n            return action.payload\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default viewReducer","const userDataReducer = (state = {}, action) => {\r\n    switch(action.type) {\r\n        case 'UPDATE_USERDATA':\r\n            return action.payload\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default userDataReducer","const albumDataReducer = (state = {}, action) => {\r\n    switch(action.type) {\r\n        case 'UPDATE_ALBUMDATA':\r\n            return action.payload\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default albumDataReducer","const albumListReducer = (state = [], action) => {\r\n    switch(action.type) {\r\n        case 'UPDATE_ALBUMLIST':\r\n            return action.payload\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default albumListReducer","const imageListReducer = (state = [], action) => {\r\n    switch(action.type) {\r\n        case 'UPDATE_IMAGELIST':\r\n            return action.payload\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default imageListReducer","import { combineReducers } from 'redux';\r\nimport viewReducer from './view';\r\nimport userDataReducer from './userData';\r\nimport albumDataReducer from './albumData';\r\nimport albumListReducer from './albumList';\r\nimport imageListReducer from './imageList';\r\n\r\nconst rootReducer = combineReducers({\r\n    view: viewReducer,\r\n    userData: userDataReducer,\r\n    albumData: albumDataReducer,\r\n    albumList: albumListReducer,\r\n    imageList: imageListReducer,\r\n})\r\n\r\nexport default rootReducer","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n//redux\nimport { createStore } from 'redux';\nimport { Provider } from 'react-redux';\nimport rootReducer from './reducers';\n\nconst store = createStore(\n  rootReducer,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n)\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}